"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},87662:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>v});var s={};r.r(s),r.d(s,{POST:()=>l});var a=r(95419),o=r(69108),n=r(99678),i=r(83701),u=r(60134),p=r(6521),c=r.n(p),d=r(98984);let l=async e=>{let{email:t,password:r}=await e.json();if(await (0,u.Z)(),await i.Z.findOne({email:t}))return new d.NextResponse("Email is already in use",{status:400});let s=await c().hash(r,5),a=new i.Z({email:t,password:s});try{return await a.save(),new d.NextResponse("user is registered",{status:200})}catch(e){return new d.NextResponse(e,{status:500})}},g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"D:\\PIAIC course\\Projects\\demo_e-commerce\\FrontEnd\\src\\app\\api\\register\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:w,serverHooks:h,headerHooks:y,staticGenerationBailout:v}=g,x="/api/register/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:w})}},83701:(e,t,r)=>{r.d(t,{Z:()=>n});var s=r(11185),a=r.n(s);let o=new(a()).Schema({firstname:{type:String},lastname:{type:String},email:{type:String},password:{type:String},role:{type:String}},{timestamps:!0}),n=s.models.User||a().model("User",o)},60134:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(11185),a=r.n(s);let o=async()=>{if(!a().connections[0].readyState)try{await a().connect(process.env.DB_CONNECTION,{useNewUrlParser:!0,useUnifiedTopology:!0}),console.log("Mongo Connection successfully established.")}catch(e){throw Error("Error connecting to Mongoose")}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,521,791],()=>r(87662));module.exports=s})();