(()=>{var e={};e.id=931,e.ids=[931],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},83672:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(50482),i=r(69108),a=r(62563),n=r.n(a),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51274)),"D:\\PIAIC course\\Projects\\demo_e-commerce\\FrontEnd\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,42753)),"D:\\PIAIC course\\Projects\\demo_e-commerce\\FrontEnd\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\PIAIC course\\Projects\\demo_e-commerce\\FrontEnd\\src\\app\\page.tsx"],u="/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},77712:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},49401:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,31900,23)),Promise.resolve().then(r.t.bind(r,61476,23)),Promise.resolve().then(r.bind(r,76747))},22394:(e,t,r)=>{Promise.resolve().then(r.bind(r,55064)),Promise.resolve().then(r.bind(r,55544)),Promise.resolve().then(r.bind(r,29118))},55064:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppContext:()=>a,AppProvider:()=>n});var s=r(95344),i=r(3729);let a=(0,i.createContext)(),n=({children:e})=>{let[t,r]=(0,i.useState)(0),[n,o]=(0,i.useState)([]);return s.jsx(a.Provider,{value:{cart:t,setCart:r,addToCart:e=>{let t=n.findIndex(t=>t.productId===e.productId);if(-1!==t){let r=[...n];r[t].quantity+=e.quantity,o(r)}else o(t=>[...t,e])},cartItems:n},children:e})}},55544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(95344),i=r(3729),a=r(56506),n=r(55064),o=r(11652),l=r(47674);let c=()=>{let{data:e}=(0,l.useSession)(),{cart:t,setCart:r}=(0,i.useContext)(n.AppContext);return s.jsx("div",{className:"flex items-center py-8 lg:py-8 px-10",children:(0,s.jsxs)("ul",{className:"hidden lg:flex items-center justify-end gap-x-8 flex-auto",children:[s.jsx(a.default,{href:"/",children:s.jsx("li",{children:"Home"})}),e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.default,{href:"/dashboard",children:s.jsx("li",{children:"Dashboard"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>{(0,l.signOut)()},className:"",children:"Log Out"})})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.default,{href:"/login",children:s.jsx("li",{children:"Login"})}),s.jsx(a.default,{href:"/register",children:s.jsx("li",{children:"Register"})})]}),s.jsx(a.default,{href:"/cart",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx(o.Z,{}),s.jsx("span",{className:"-mt-3",children:t})]})})]})})}},76747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(95344),i=r(3729),a=r(47674);let n=()=>{let[e,t]=(0,i.useState)(""),[r,n]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(null),[p,x]=(0,i.useState)(""),{data:h}=(0,a.useSession)(),g=async e=>{e.preventDefault();try{await fetch("/api/addProduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"",description:"",price:0,image:""})}),x("Product Added Successfully")}catch(e){m(e)}};return h?(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-gray-100 rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-2xl mb-4",children:"Add Product"}),(0,s.jsxs)("form",{onSubmit:e=>g(e),className:"gap-y-6 flex flex-col",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"title",children:"Title"}),s.jsx("input",{type:"text",id:"title",name:"title",value:e,onChange:e=>t(e.target.value),className:"flex w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"description",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:r,onChange:e=>n(e.target.value),className:"flex w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"price",children:"Price: "}),s.jsx("input",{type:"text",id:"price",name:"price",value:o,onChange:e=>l(e.target.value),className:"flex w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"image",children:"Image URL"}),s.jsx("input",{type:"text",id:"image",name:"image",value:c,onChange:e=>d(e.target.value),className:"flex w-full"})]}),s.jsx("button",{type:"submit",className:"border-black border max-w-24 mx-auto w-full",children:"Submit"})]}),u&&s.jsx("p",{style:{color:"red"},className:"mt-4",children:u}),p&&s.jsx("p",{style:{color:"green"},className:"mt-4",children:p})]}):s.jsx("div",{className:"text-bold text-center my-10 text-xl",children:"Login in To Add Products"})}},29118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(95344);r(3729);var i=r(47674);let a=({children:e})=>s.jsx(i.SessionProvider,{children:e})},86485:(e,t)=>{"use strict";t.Z=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},50694:(e,t)=>{"use strict";t.Z=function(e){return{id:"github",name:"GitHub",type:"oauth",authorization:{url:"https://github.com/login/oauth/authorize",params:{scope:"read:user user:email"}},token:"https://github.com/login/oauth/access_token",userinfo:{url:"https://api.github.com/user",async request({client:e,tokens:t}){let r=await e.userinfo(t.access_token);if(!r.email){let e=await fetch("https://api.github.com/user/emails",{headers:{Authorization:`token ${t.access_token}`}});if(e.ok){var s;let t=await e.json();r.email=(null!==(s=t.find(e=>e.primary))&&void 0!==s?s:t[0]).email}}return r}},profile(e){var t;return{id:e.id.toString(),name:null!==(t=e.name)&&void 0!==t?t:e.login,email:e.email,image:e.avatar_url}},style:{logo:"/github.svg",bg:"#24292f",text:"#fff"},options:e}}},42753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P,metadata:()=>y});var s=r(25036),i=r(53640),a=r.n(i);r(5023);var n=r(86843);let o=(0,n.createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\app\layout\header.tsx`),{__esModule:l,$$typeof:c}=o,d=o.default,u=(0,n.createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\app\Context\CartContext.js`),{__esModule:m,$$typeof:p}=u;u.default,(0,n.createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\app\Context\CartContext.js#AppContext`);let x=(0,n.createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\app\Context\CartContext.js#AppProvider`);var h=r(81355);let g=(0,n.createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\utils\SessionProvider.tsx`),{__esModule:f,$$typeof:v}=g,j=g.default,y={title:"E-commerce Website",description:"Created by Adnan"};async function P({children:e}){let t=await (0,h.getServerSession)();return s.jsx("html",{lang:"en",children:s.jsx("body",{className:a().className,children:s.jsx(j,{session:t,children:s.jsx(x,{children:(0,s.jsxs)("div",{children:[s.jsx(d,{}),e]})})})})})}},51274:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>h});var s=r(25036);let i=(0,r(86843).createProxy)(String.raw`D:\PIAIC course\Projects\demo_e-commerce\FrontEnd\src\components\AddProduct.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default;r(40002);var l=r(31119),c=r(2813),d=r(16274);let u=({product:e})=>s.jsx(d.default,{href:`/product/${e._id}`,children:(0,s.jsxs)("div",{children:[s.jsx("div",{children:s.jsx(c.default,{width:300,height:300,alt:e.title,src:e.image})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Product Title: ",e.title]}),(0,s.jsxs)("p",{children:["Price: ",e.price]})]}),s.jsx("br",{})]})});async function m(){let e=await l.Z.getAllProducts();return s.jsx("main",{className:"bg-blue-200 flex justify-center gap-x-10 flex-col",children:(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-center text-2xl font-bold py-6",children:"All Products"}),s.jsx("div",{className:"flex flex-col-3 gap-x-8 justify-center",children:e.map((e,t)=>s.jsx(u,{product:e},t))})]})})}var p=r(81355),x=r(53407);let h={title:"Adnan E-Commerce",description:process.env.NEXT_PUBLIC_APP_DESC||"Nextjs"};async function g(){return await (0,p.getServerSession)(x.L),(0,s.jsxs)("section",{children:[s.jsx(m,{}),s.jsx(o,{})]})}},13962:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),i=r.n(s);let a=new(i()).Schema({title:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0},image:{type:String,required:!0}},{timestamps:!0}),n=i().models.Product||i().model("Product",a)},83701:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),i=r.n(s);let a=new(i()).Schema({firstname:{type:String},lastname:{type:String},email:{type:String},password:{type:String},role:{type:String},resetToken:{type:String,required:!1},resetTokenExpiry:{type:Date,required:!1}},{timestamps:!0}),n=s.models.User||i().model("User",a)},25459:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var s=r(11185),i=r.n(s);let a=async()=>{try{await i().connect(process.env.DB_CONNECTION),console.log("Connected to MongoDB")}catch(e){console.log("Error connecting to MongoDB: ",e)}}},31119:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(40002),i=r(25459),a=r(13962);let n={getById:(0,s.cache)(async e=>(await (0,i.q)(),await a.Z.findById({_id:e}))),getAllProducts:(0,s.cache)(async()=>(await (0,i.q)(),await a.Z.find()))}},53407:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var s=r(50694),i=r(86485),a=r(6521),n=r.n(a),o=r(83701),l=r(60134);let c={providers:[(0,i.Z)({id:"credentials",name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){await (0,l.Z)();try{let t=await o.Z.findOne({email:e.email});if(t&&await n().compare(e.password,t.password))return t}catch(e){throw Error(e)}}}),(0,s.Z)({clientId:process.env.GITHUB_ID??"",clientSecret:process.env.GITHUB_SECRET??""})],callbacks:{async signIn({user:e,account:t}){if(t?.provider=="credentials")return!0;if(t?.provider=="github"){await (0,l.Z)();try{if(!await o.Z.findOne({email:e.email})){let t=new o.Z({email:e.email});await t.save()}}catch(e){return console.log("Error saving user",e),!1}}return!0}}}},60134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(11185),i=r.n(s);let a=async()=>{if(!i().connections[0].readyState)try{await i().connect(process.env.DB_CONNECTION,{useNewUrlParser:!0,useUnifiedTopology:!0}),console.log("Mongo Connection successfully established.")}catch(e){throw Error("Error connecting to Mongoose")}}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(70337);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,605,732,337,521,352],()=>r(83672));module.exports=s})();